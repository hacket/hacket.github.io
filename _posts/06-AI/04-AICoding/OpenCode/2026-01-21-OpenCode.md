---
banner:
date_created: Wednesday, January 21st 2026, 12:14:34 am
date_updated: Thursday, January 22nd 2026, 12:44:10 am
title: OpenCode
author: hacket
categories:
  - AI
category: Vibe Coding
tags:
  - AI
  - VibeCoding
toc: true
description:
dg-publish: true
dg-enable-search: true
dg-show-local-graph: true
dg-show-toc: true
dg-show-file-tree: true
image-auto-upload: true
feed: show
format: list
aliases:
  - OpenCode
linter-yaml-title-alias: OpenCode
---

# OpenCode

## 常用命令

### 安装

OpenCode 分为「**命令行**」版本、「**客户端**」版本和「**网页端**」版本。

- 命令行

```shell
# 使用 npm
npm install -g opencode-ai

# 或使用 Homebrew (macOS/Linux)
brew install anomalyco/tap/opencode

# 所有
# YOLO  
curl -fsSL https://opencode.ai/install | bash  
  
# Package managers  
npm i -g opencode-ai@latest        # or bun/pnpm/yarn  
scoop install opencode             # Windows  
choco install opencode             # Windows  
brew install anomalyco/tap/opencode # macOS and Linux (recommended, always up to date)  
brew install opencode              # macOS and Linux (official brew formula, updated less)  
paru -S opencode-bin               # Arch Linux  
mise use -g opencode               # Any OS  
nix run nixpkgs#opencode           # or github:anomalyco/opencode for latest dev branch
```

- 客户端
客户端版本下载地址：[Releases · anomalyco/opencode](https://github.com/anomalyco/opencode/releases)
OpenCode 支持 **macOS、Windows、Linux** 操作系统

- 网页端版本
OpenCode 还支持 Web 网页端使用，在安装好命令行版本后，使用 `opencode web` 命令就能启用网页版本；
它会在本地启用了一个 `4096` 端口，访问 `http://127.0.0.1:4096/` 地址即可：这样我们就只需要映射一个域名到本地端口，就能实现在外面连接家里的 `opencode` 编程了。

### 核心命令

| 命令         | 功能                                                                                            |
| :--------- | :-------------------------------------------------------------------------------------------- |
| `/models`  | 切换模型                                                                                          |
| `/connect` | 添加 API Key                                                                                    |
| `/init`    | 初始化项目的 OpenCode 配置，它会在项目根目录下初始化一个 `AGENTS.md` 文件。这个文件可以提交到 Git，这有助于 OpenCode 了解项目结构和所使用的编码模式。 |
| `/undo`    | 撤销上次修改                                                                                        |
| `/redo`    | 重做                                                                                            |
| `/share`   | 分享对话链接                                                                                        |
| `Tab`      | 切换 Plan 模式（只规划不执行）                                                                            |

## 基本用法

### 快捷键

- 使用 `/` 使用使用快捷命令：
- 使用 `@` 引用上下文内容：

### 使用内置 Agents

OpenCode 内置了两个 Agents：

- **build（构建）**：默认模式，**完全授权**的代理开发模式；
- **plan（计划）**： 用于**分析和代码探索**的只读代理，**默认情况下禁止文件编辑**，运行 Bash 命令前会先征求许可，特别适合用来探索不熟悉的代码库，或者规划代码改动。

在命令行版本中，你可以用 `Tab` 键进行切换，在客户端版本中在输入框左下角进行切换。

比如，你开发一个新功能时，你可以使用 `plan` 模型给你出实现方案，如果对方案感到满意后，再次按 Tab 键切换回 `build` 模式让它实现那个文案即可。

另外，OpenCode 还内置了一个用于**复杂搜索和多步骤任务**的通用子代理，这个功能在内部使用，可以通过在消息中使用 `@general` 来调用。

### 回滚代码

在 OpenCode 中回滚代码非常简单，使用 `/undo` 命令即可；回滚成功后还可以使用 `/redo` 命令进行重做

## 支持的模型

OpenCode 支持 **75 多个 LLM 提供商**，并且支持运行本地模型，其中还包括几个免费的大模型。

在命令行中使用 `/models` 命令可以选择要使用的模型：有 `Free` 标识的就是可以免费使用的模型

### 免费模型配置

OpenCode 支持多个免费模型提供商，无需付费即可使用。

#### 方式一：Z.AI（推荐，GLM-4.7）

1. 访问 [Z.AI API 控制台](https://z.ai/manage-apikey/apikey-list) 注册并创建 API Key
2. 运行 `/connect` 命令，搜索 **Z.AI**
3. 输入 API Key
4. 运行 `/models` 选择 **GLM-4.7**

```bash
opencode
# 进入后输入
/connect
# 选择 Z.AI，输入 API Key
/models
# 选择 GLM-4.7
```

**注意：** 国内的选 `Zhipu AI`，控制台：[ZHIPU AI OPEN PLATFORM](https://bigmodel.cn/usercenter/proj-mgmt/apikeys)

#### 方式二：MiniMax（M2.1）

1. 访问 [MiniMax API 控制台](https://platform.minimax.io/login) 注册并创建 API Key
2. 运行 `/connect`，搜索 **MiniMax**
3. 输入 API Key
4. 运行 `/models` 选择 **M2.1**

#### 方式三：Hugging Face（多种免费模型）

1. 访问 [Hugging Face 设置](https://huggingface.co/settings/tokens/new?ownUserPermissions=inference.serverless.write&tokenType=fineGrained) 创建 Token
2. 运行 `/connect`，搜索 **Hugging Face**
3. 输入 Token
4. 运行 `/models` 选择 **Kimi-K2-Instruct** 或 **GLM-4.6**

#### 方式四：本地模型（Ollama）

```bash
# 安装 Ollama
curl -fsSL https://ollama.com/install.sh | sh

# 拉取模型
ollama pull llama2
```

在 `opencode.json` 中配置：

```json
{
  "$schema": "https://opencode.ai/config.json",
  "provider": {
    "ollama": {
      "npm": "@ai-sdk/openai-compatible",
      "name": "Ollama (local)",
      "options": {
        "baseURL": "http://localhost:11434/v1"
      },
      "models": {
        "llama2": {
          "name": "Llama 2"
        }
      }
    }
  }
}
```

#### 连接其他主流大模型

使用 OpenCode，可以通过 `/connect` 命令配合 API 密钥来使用任何 LLM 提供商。

OpenCode 除了使用 API Key 连接其他主流大模型，它还支持所有主流服务商的订阅计划，可以使用 `Claude Pro/Max`、`ChatGPT Plus/Pro` 或 `GitHub Copilot` 等订阅计划，连上它们就能使用了。

比如，在这里我还可以连接 Google Gemini，去 ai Studio 注册一个 api key，认证成功后就可以使用 Google Gemini 相关模型了：

![image.png](https://raw.githubusercontent.com/hacket/ObsidianOSS/master/obsidian/20260122002021926.png)

## 配置文件位置

- 全局配置：`~/.config/opencode/opencode.json`
- 项目配置：`./opencode.json`（项目根目录）
- 认证信息：`~/.local/share/opencode/auth.json`

## 推荐工作流

1. **进入项目目录**

   ```bash
   cd /path/to/project
   opencode
   ```

2. **初始化项目**

   ```
   /init
   ```

3. **切换免费模型**

   ```
   /models
   # 选择 GLM-4.7 或 MiniMax M2.1
   ```

4. **开始工作**
   - 先用 `Tab` 切换到 Plan 模式，让 AI 规划
   - 确认方案后再让 AI 执行## 推荐工作流

## 让 AI 执行一切配置任务

OpenCode 的核心思维：**把所有配置任务交给 AI**。

### 示例：安装 MCP 服务器

```
帮我安装 filesystem MCP 服务器，配置到 opencode
```

### 示例：部署 GitHub 开源项目

```
克隆 https://github.com/xxx/yyy 项目，阅读 README，帮我完成所有依赖安装和环境配置
```

### 示例：配置 Skills

```
阅读项目结构，为这个项目创建合适的 AGENTS.md 规则文件
```

### 示例：配置环境变量

```
检查项目需要哪些环境变量，帮我创建 .env 文件模板并说明每个变量的用途
```

### 示例：安装依赖

```
分析 package.json / requirements.txt，安装所有依赖，解决版本冲突
```

## OpenCode 和 Claude Code 区别

- OpenCode 100% 开源，个人免费
- 不绑定任何 AI 服务商，能和 Claude、OpenAI、Gemini 甚至本地模型一起用
- 开箱即用的 LSP 支持
- 专注终端界面（TUI）体验，OpenCode 把终端里的编程体验做到了极限；
- 使用了**客户端/服务器**架构，客户端多样性，比如，你能让 OpenCode 在你的电脑上运行，又能通过手机 App 远程操控它。

## Oh My OpenCode

同时火爆的还有 `oh-my-opencode` 插件，开源地址：<https://github.com/code-yeongyu/oh-my-opencode>

这命名，感觉在致敬 Linux 界的传奇 "**Oh My Zsh**"，同时它也叫 **Sisyphus**，它是一个开箱即用、能像你一样写代码的智能助手。

Oh My OpenCode 插件的核心理念是多代理协作，除了主代理之外，它还引入了一系列专业代理，比如以下几个精选代理：

- **Oracle**：设计、调试；
- **Frontend UI/UX Engine**r：前端开发；
- **Librarian**：官方文档、开源实现、代码库探索；
- **Explore**：超快的代码库探索（上下文搜索）。

oh My OpenCode 支持同时调用多个代理，比如，它能自动搜索官方文档、你整个代码库的历史记录，它还内置了 LSP 工具，派给 LLMs 时，再也不用担心上下文管理了。

作者说，他为了个人开发，光是用 LLMs 就花了大约 **24000** 个 token，各种工具都试了个遍，折腾得死去活来，**最后还是 OpenCode 赢了**。

他还说，他遇到的每个问题，答案全都在这个插件里了，如果说 OpenCode 是 Debian/Arch，那 Oh My OpenCode 就是 Ubuntu/Omarchy。

安装完成后，按说明完成各服务商的认证：

> 截至 2026 年 1 月，Anthropic 已因违反服务条款（ToS）而限制了第三方 OAuth 访问，所以，目前 Claude Code 的订阅是不能用了。

按照提示按需配置你订阅的 Claude、ChatGPT 和 Gemini 计划即可，没有就选择 No。安装完成，现在就可以使用 Oh My OpenCode 插件了。

重新启动 OpenCode，使用 `/agent` 命令来切换 Agent：

## 相关资源

- [OpenCode 官方文档](https://opencode.ai/docs/)
- [GitHub 仓库](https://github.com/opencode-ai/opencode)
- [Models.dev - 模型目录](https://models.dev/)
