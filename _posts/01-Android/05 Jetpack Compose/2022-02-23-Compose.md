---
date_created: Friday, February 23rd 2022, 10:10:45 pm
date_updated: Wednesday, January 29th 2025, 10:59:44 pm
title: Compose
author: hacket
categories:
  - Android
category: Compose
tags: [Compose]
toc: true
description: 
dg-publish: true
dg-enable-search: true
dg-show-local-graph: true
dg-show-toc: true
dg-show-file-tree: true
image-auto-upload: true
feed: show
format: list
date created: 2024-07-23 01:58
date updated: 2024-12-24 00:34
aliases: [Compose 遇到的问题]
linter-yaml-title-alias: Compose 遇到的问题
---

# Compose 遇到的问题

## java.lang.NoSuchMethodError: No static method setContent$default

### 现象

出现的这个问题比较恶心，编译啥的都能通过，也能安装成功，但是就是运行无法成功，启动就闪退。<br>将 Compose 集成到 App 中，编译通过，启动时崩溃报错：<br>![s1md8](https://raw.githubusercontent.com/hacket/ObsidianOSS/master/obsidian/us027.png)

### 可能的原因

1. [Kotlin和Compose Compiler版本兼容问题](https://developer.android.google.cn/jetpack/androidx/releases/compose-kotlin?hl=en)

![dgte3](https://raw.githubusercontent.com/hacket/ObsidianOSS/master/obsidian/dgte3.png)

2. Compose Compiler 没有生效

从报错信息看，再反编译看调用到的方法<br>调用的 ` setContent$default(Landroidx/activity/ComponentActivity;Landroidx/compose/runtime/CompositionContext;Lkotlin/jvm/functions/Function0;ILjava/lang/Object;)V  ` 是一个带 Function0 的方法，但没有这个方法<br>![88lbw](https://raw.githubusercontent.com/hacket/ObsidianOSS/master/obsidian/88lbw.png)<br>但 androidx.activity.compose�.ComponentActivity.setDefault 的是 Function2<br>![h2w19](https://raw.githubusercontent.com/hacket/ObsidianOSS/master/obsidian/uas1i.png)

### 解决

1. Kotlin 版本：1.8.10
2. JDK 版本：11
3. Compose compiler 版本：1.4.3
4. 去除 buildSrc

### Ref

- [ ] [NoSuchMethodError: No static method setContent, because of gradle buildSrc "com.android.tools.build:gradle:7.0.0"](https://issuetracker.google.com/issues/195273509)
- [ ] [Loading the kotlin plugin multiple time leads to compose compiler plugin not being run.](https://issuetracker.google.com/issues/295349264)
