---
banner: 
date_created: Friday, February 23rd 2021, 10:10:45 pm
date_updated: Tuesday, April 22nd 2025, 12:35:42 am
title: 内存抖动
author: hacket
categories:
  - 性能优化
category: 内存优化
tags: [内存优化, 性能优化]
toc: true
description: 
dg-publish: true
dg-enable-search: true
dg-show-local-graph: true
dg-show-toc: true
dg-show-file-tree: true
image-auto-upload: true
feed: show
format: list
date created: 2024-12-24 00:38
date updated: 2024-12-24 00:38
aliases: [内存抖动]
linter-yaml-title-alias: 内存抖动
---

# 内存抖动

## 内存抖动

### 什么是内存抖动？

是**内存抖动**是由于短时间内有大量对象进出 `Yong Generation` 区导致的，它伴随着频繁的 GC。<br />通常发生内存抖动时，在 AS 的 Monitors 可以看到，内存曲线短时间内波动很大。

## 如何避免内存抖动

1. 尽量避免在循环体内部创建对象，应该把对象创建移到循环体外
2. 注意自定义 View 的 onDraw() 方法会频繁被调用，所以不要在该方法中创建对象
3. 使用 StringBuilder 拼接字符串，不要频繁使用 `+/-`
4. 当需要大量使用 Bitmap 时，试着把它们缓存在数组中实现复用
5. 对于能够复用的对象，使用对象池将它们缓存起来

### 内存抖动排查

用 AS Profiler 工具，如果一段时间内，呈现了锯齿状图形，可能是出现了内存抖动，再分析具体代码存在的问题
