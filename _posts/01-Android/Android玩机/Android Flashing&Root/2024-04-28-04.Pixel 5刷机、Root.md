---
date_created: Sunday, April 28th 2024, 11:08:54 pm
date_updated: Monday, February 10th 2025, 8:11:19 pm
title: 04.Pixel 5刷机、Root
author: hacket
categories:
  - Android进阶
category: 玩机
tags: [Root, 刷机, 玩机]
toc: true
description: 
dg-publish: true
dg-enable-search: true
dg-show-local-graph: true
dg-show-toc: true
dg-show-file-tree: true
image-auto-upload: true
feed: show
format: list
date created: 2024-12-24 00:40
date updated: 2024-12-24 00:42
aliases: [刷机]
linter-yaml-title-alias: 刷机
---

# 刷机

## 卡刷（OTA 升级）

1. 下载 images，[pixel5 image下载链接](https://developers.google.cn/android/images#redfin)
2. 手机连接电脑
3. 把 OTA 包移动到 `Platform-tools` 文件夹（不需要解压）
4. 进入 recovery 模式

> adb reboot recovery

5. 选择 "`Apply update from ADB`" 指令
6. adb devices，看下是不是 sideload

![x0yp9](https://raw.githubusercontent.com/hacket/ObsidianOSS/master/obsidian/x0yp9.png)

7. 在 Platform-tools 文件夹打开 cmd（或 powershell 中先输入 cmd 回车）输入指令：`adb sideload OTA.zip`（OTA.zip 指的是下载的 OTA 升级包全名）
8. 等待窗口指令，手机重启后刷机完成

![f6ud7](https://raw.githubusercontent.com/hacket/ObsidianOSS/master/obsidian/f6ud7.png)

## 线刷（刷出厂映像）

1. 手机连接电脑
2. 将线刷包（出厂完整映像）解压到 Platform-tools 文件夹
3. 手机进入 bootloader 模式
4. 点击 Platform-tools 文件夹的 flash-all.bat
5. 等待窗口指令，手机重启后刷机完成

# Root

## Root （Magisk 方式）

### 解锁 Bootloader

#### 开启开发者模式和 USB 调试

关于手机→Build 号（多次点击），打开开发者模式

#### OEM 解锁

`开发者模式→OEM解锁`<br>![92jtn](https://raw.githubusercontent.com/hacket/ObsidianOSS/master/obsidian/92jtn.png)

#### 进入 Bootloader 模式

輸入 `adb reboot bootloader`，手機會立即重啟至 Bootloader 模式。

```shell
adb reboot bootloader
```

此時手机會出现這畫面就是 Bootloader 模式<br>可以看到目前綠色字代表目前是鎖定狀態，我們接下來要解鎖：<br>![wffs2](https://raw.githubusercontent.com/hacket/ObsidianOSS/master/obsidian/wffs2.jpg)<br>然后，通過 `fastboot devices` 命令驗證 fastboot 是否成功：

```shell
fastboot devices
```

![lshxy](https://raw.githubusercontent.com/hacket/ObsidianOSS/master/obsidian/lshxy.png)<br>如果沒反應，請在電腦上安裝最新 Pixel 驱动 (我也卡在這邊好久，爬文找到答案)<br><https://developer.android.com/studio/run/win-usb?hl=zh-cn><br>![rlsld](https://raw.githubusercontent.com/hacket/ObsidianOSS/master/obsidian/rlsld.png)

#### 解锁 Bootloader

注意：解鎖 Bootloader 等同重回原廠設定，請事先登出 Google 帳號 & 刪除指紋、密碼等安全設定。

```shell
fastboot flashing unlock
```

![nfxdx](https://raw.githubusercontent.com/hacket/ObsidianOSS/master/obsidian/nfxdx.jpg)<br>输入命令后用音量鍵選擇 `Unlock the bootloader`，接著他會重啟 Bootloader：<br>![oy35j](https://raw.githubusercontent.com/hacket/ObsidianOSS/master/obsidian/oy35j.jpg)<br>然後你會看到它變成紅色 Unlock，此時代表成功解鎖 Bootloade：<br>![m4738](https://raw.githubusercontent.com/hacket/ObsidianOSS/master/obsidian/m4738.jpg)<br>通過 fastboot reboot 命令重啟手機<br>重新開機後，出現如下這個畫面就是解鎖成功<br>![srkll](https://raw.githubusercontent.com/hacket/ObsidianOSS/master/obsidian/srkll.jpg)<br>解鎖 Bootloader 後，此時手機會恢復出廠狀態，因為還是要使用 adb 指令<br>所以要重新去打開 OEM 解锁 & USB 调试，见前面

### 安装 magisk

#### 确认系统版本

先要确认要 Root 的系统版本，方便下哪个系统，这里看到 Build 号是：`UP1A.231005.007`<br>![064bf](https://raw.githubusercontent.com/hacket/ObsidianOSS/master/obsidian/064bf.png)<br>去官网找到 [对应的image](https://developers.google.cn/android/images#redfin)：<br>![q5mkd](https://raw.githubusercontent.com/hacket/ObsidianOSS/master/obsidian/q5mkd.png)

#### 下载 images 线刷固件 image

- [x] ["crosshatch" for Pixel 3 XL](https://developers.google.cn/android/images#crosshatch)
- [x] ["redfin" for Pixel 5](https://developers.google.cn/android/images#redfin)
- [x] [所有的images](https://developers.google.cn/android/images)

#### 用 magisk 修补 boot.img

- 解压 zip 文件，并在里面中找到名为 `boot.img` 的文件

> 解压 crosshatch-rq2a.210505.002-factory-796587ee.zip，再解压 image-crosshatch-rq2a.210505.002.zip，解压出 boot.img

![gzcsk](https://raw.githubusercontent.com/hacket/ObsidianOSS/master/obsidian/gzcsk.png)

- 下载 Magisk，安装<br><https://github.com/topjohnwu/Magisk/releases>
- 然后把 boot.img 给复制到手机的任意目录里，完成之后打开 `Magisk Manager` 下载并安装至手机，然后把更新通道改为 Canary（如果没有，就改为测试版）

```
adb push boot.img /sdcard/Download/
```

![b2s07](https://raw.githubusercontent.com/hacket/ObsidianOSS/master/obsidian/b2s07.png)

- 安装界面选择选择修补文件

![f55ox](https://raw.githubusercontent.com/hacket/ObsidianOSS/master/obsidian/f55ox.png)

- 选择后点击开始（选择你放入的 boot.img）等它修补完成后会把修补好的 `xxx.img` 放入 boot.img 所在文件夹，在里面找到 `magisk_patched_xxx.img` 并把它移动到电脑中。

```shell
adb pull /sdcard/Download/magisk_patched_wLtVr.img ~/downloads/pixel3xl/magisk_patched_wLtVr.img
# 如果Download目录没有什么文件，直接把整个Download pull下来
# adb pull /sdcard/Download/ ./
```

#### 开始 Root

- 进入到 BootLoader

```shell
adb reboot bootloader
```

- 运行 fastboot flash boot 命令

```
fastboot flash boot magisk_patched_wLtVr.img
```

![itxe0](https://raw.githubusercontent.com/hacket/ObsidianOSS/master/obsidian/itxe0.png)

- 重启手机，打开 Magisk，可能还需要你做一些设置，需要重启
- 再次打开 Magisk 查看状态，`Ramdisk:是` 表示 Root 成功了

![gbuwt](https://raw.githubusercontent.com/hacket/ObsidianOSS/master/obsidian/gbuwt.png)

#### 电信解锁（如果需要）

<https://blog.csdn.net/Ender_Zhao/article/details/108659911>
