---
date created: 2024-12-24 00:31
date updated: 2024-12-24 00:31
dg-publish: true
---

# 渠道包方案

## 1、productFlavor

其实就是采用gradle去配置不同的productFlavor，然后用manifestPlaceholder占位符去解析manifest文件里面的meta-data的value，来进行打包，耗时耗力，原理就是一个一个包去打，虽然免去了手动，但是很耗时。

## 2、**美团一代： **

这种只有在v1签名的时候才可以这么做，它将APK直接当做zip解压，目录里会有一个`META-INF`目录而此目录是不参与签名校验的。

因此在META-INF目录内添加不同渠道名的空文件，可以唯一标识一个渠道。采用这种方式，每打一个渠道包只需复制一个apk，在META-INF中添加一个使用渠道号命名的空文件即可。

## 3、**美团二代： **

由于7.0之后的签名机制都是v2了，所以美团一代的打包方式已经不可行了，于是美团出了新的打包方案，就是通过在Apk中的`APK Signature Block`区块添加自定义的渠道信息来生成渠道包，从而提高了渠道包生成效率，可以作为单机工具来使用，也可以部署在HTTP服务器上来实时处理渠道包Apk的升级网络请求。

打包一次即可完成几百个包的生成
