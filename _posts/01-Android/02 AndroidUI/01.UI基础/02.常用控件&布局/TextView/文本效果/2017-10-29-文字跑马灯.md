---
banner: 
date_created: Tuesday, October 29th 2017, 12:08:52 am
date_updated: Monday, March 17th 2025, 11:49:54 pm
title: 文字跑马灯
author: hacket
categories:
  - AndroidUI
category: TextView
tags: [TextView]
toc: true
description: 
dg-publish: true
dg-enable-search: true
dg-show-local-graph: true
dg-show-toc: true
dg-show-file-tree: true
date created: 星期二, 六月 4日 2024, 4:20:00 下午
date updated: 星期一, 一月 6日 2025, 9:54:00 晚上
image-auto-upload: true
feed: show
format: list
aliases: [TextView 文字跑马灯]
linter-yaml-title-alias: TextView 文字跑马灯
---

# TextView 文字跑马灯

## TextView 跑马灯（显示一行，滚动显示）

TextView 不会主动获取焦点，一个布局中只能有一个组件获取焦点<br>获取到焦点时跑马灯。<br>设置成 maxLines="1" 时跑马灯不工作，要用 singleLine="true"

### 系统自带的 xml 中进行属性配置

```xml
android:ellipsize="marquee"  
android:focusable="true"
android:focusableInTouchMode="true"
android:singleLine="true"  //只显示一行
```

### 自定义一个滚动的 TextView

对 button，这种，可以触摸获取焦点的，配置 android:ellipsize="marquee" android:singleLine="true"  ，就可以将看不到的文字显示出来，而 TextView，天生不能获取焦点，那只能重写里面的方法，isActivated ()，让其返回 true，那么就可以被获取焦点了。

```java
public class FocusedTextView extends AppCompatTextView {
    public FocusedTextView(Context context, AttributeSet attrs, int defStyle) {
        super(context, attrs, defStyle);
    }

    public FocusedTextView(Context context, AttributeSet attrs) {
        super(context, attrs);
    }

    public FocusedTextView(Context context) {
        super(context);
    }

    @Override
    public boolean isFocused() {
        return true;
    }
}
```

#### 控制跑马灯

```kotlin
btn_start_marquee.setOnClickListener {
    if (tv_marquee.getEllipsize() != null) {
        tv_marquee.setEllipsize(null);
    } else {
        tv_marquee.setEllipsize(TextUtils.TruncateAt.MARQUEE);
    }
}
```

#### 跑马灯控制方向

- 可以控制移动方向的跑马灯<br><https://weiwangqiang.github.io/2019/02/03/controllable-marquee/>
