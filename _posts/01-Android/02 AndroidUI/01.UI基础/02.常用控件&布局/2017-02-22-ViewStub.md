---
banner: 
date_created: Saturday, February 22nd 2017, 4:41:54 pm
date_updated: Wednesday, March 12th 2025, 12:14:45 am
title: ViewStub
author: hacket
categories:
  - AndroidUI
category: 系统控件
tags: []
toc: true
description: 
dg-publish: true
dg-enable-search: true
dg-show-local-graph: true
dg-show-toc: true
dg-show-file-tree: true
image-auto-upload: true
feed: show
format: list
aliases: [ViewStub]
linter-yaml-title-alias: ViewStub
---

# ViewStub

## 什么是 ViewStub？

## ViewStub 使用？

## ViewStub 和 ViewBinding

- 封装

```kotlin
fun ViewStub.isRealInflated():Boolean {  
    return  inflatedId != View.NO_ID && parent == null  
}  
  
fun ViewStub.safeInflate() {  
    if (inflatedId != View.NO_ID && parent != null) {  
        inflate()  
    }  
}  
  
inline fun <reified T : View> ViewStub.safeInflate(): T? {  
    if (inflatedId != View.NO_ID && parent != null) {  
        setTag(R.id.v_annulus,inflate())  
    }  
    val bindingTag = getTag(R.id.v_annulus)  
    return if(bindingTag is T) bindingTag else null  
}  
  
inline fun <reified T : ViewBinding> ViewStub.safeBindInflateView(bindView: (view: View) -> ViewBinding): T? {  
    if (inflatedId != View.NO_ID && parent != null) {  
        setTag(R.id.v_annulus,bindView.invoke(inflate()))  
    }  
    return getTag(R.id.v_annulus) as? T  
}  
  
fun  ViewStub.safeInflateView(): View {  
    return if (inflatedId != View.NO_ID && parent != null) {  
        val view = inflate()  
        setTag(R.id.v_annulus,view)  
        view  
    } else {  
        (getTag(R.id.v_annulus) as? View) ?: this  
    }  
}
```

- 使用

## ViewStub 和 DataBinding

```kotlin
```

## AsyncViewStub
