---
date created: 星期二, 十二月 24日 2024, 12:29:00 凌晨
date updated: 星期一, 一月 6日 2025, 9:54:36 晚上
title: 动画面试题
dg-publish: true
image-auto-upload: true
feed: show
format: list
categories: [Android]
aliases: [动画面试题]
linter-yaml-title-alias: 动画面试题
---

## 视图动画

## 属性动画

# 动画面试题

## 视图动画题

### 可以在 onCreate 或者 onResume 中 start Animation 吗？

Android] 在 OnCreate() 中播放 Animation 动画，默认情况下，不能在 OnCreate() 中执行 animation.start(); 是无效的，因为在 OnCreate() 中 AnimationDrawable 还没有完全的与 ImageView 绑定，在 OnCreate() 中启动动画，就只能看到第一张图片。<br />**为什么？**<br />从 startAnimation 源码入手来看：

```java
public void startAnimation(Animation animation) {
    animation.setStartTime(Animation.START_ON_FIRST_FRAME);
    setAnimation(animation);
    invalidateParentCaches();
    invalidate(true);
}
void invalidateInternal(int l, int t, int r, int b, boolean invalidateCache,
	boolean fullInvalidate) {
	// ...
    final AttachInfo ai = mAttachInfo;
    final ViewParent p = mParent;
    if (p != null && ai != null && l < r && t < b) {
        final Rect damage = ai.mTmpInvalRect;
        damage.set(l, t, r, b);
        p.invalidateChild(this, damage);
    }
    // ...
}
```

如果 mAttachInfo 不为 null，才会执行 p.invalidateChild，而在 onCreate/onResume 中，view 还没有 attach 到 Window，mAttachInfo 为 null；而 Animation 的 applyTransformation 就是在 view 的 draw 中执行，所以在 view 还未 attach 到 Window，执行 startAnimation 是没有效果的
