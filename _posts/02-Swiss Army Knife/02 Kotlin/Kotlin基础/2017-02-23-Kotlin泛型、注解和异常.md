---
date_created: Friday, February 23rd 2017, 10:10:45 pm
date_updated: Friday, January 31st 2025, 6:40:10 pm
title: Kotlinæ³›å‹ã€æ³¨è§£å’Œå¼‚å¸¸
author: hacket
categories:
  - Java&Kotlin
category: KotlinåŸºç¡€
tags: [KotlinåŸºç¡€]
toc: true
description: 
dg-publish: true
dg-enable-search: true
dg-show-local-graph: true
dg-show-toc: true
dg-show-file-tree: true
image-auto-upload: true
feed: show
format: list
date created: 2024-12-27 23:45
date updated: 2024-12-27 23:45
aliases: [Kotlin æ³›å‹]
linter-yaml-title-alias: Kotlin æ³›å‹
---

# Kotlin æ³›å‹

## æ³›å‹ç±»å‹å‚æ•°

> 1. ç±»å‹å½¢å‚ï¼Œå¦‚ List `<>` é‡Œçš„ T å« `ç±»å‹å½¢å‚`
> 2. ç±»å‹å®å‚ï¼ŒListï¼ŒString å« `ç±»å‹å®å‚`

æ³›å‹å…è®¸ä½ å®šä¹‰å¸¦**ç±»å‹å½¢å‚**çš„ç±»å‹ï¼Œå½“è¿™ç§ç±»å‹çš„å®ä¾‹è¢«åˆ›å»ºå‡ºæ¥çš„æ—¶å€™ï¼Œç±»å‹å½¢å‚è¢«æ›¿æ¢æˆç§°ä¸º**ç±»å‹å®å‚**çš„å…·ä½“ç±»å‹ã€‚

æ­£å¸¸æƒ…å†µä¸‹ï¼Œç¼–è¯‘å™¨å¯ä»¥æ¨å¯¼å‡ºä½ åˆ›å»ºçš„ç±»å‹ã€‚ä½†ä½ æƒ³åˆ›å»ºä¸€ä¸ªç©ºçš„åˆ—è¡¨ï¼Œè¿™æ ·å°±æ²¡æœ‰ä»»ä½•å¯ä»¥æ¨å¯¼å‡ºç±»å‹å®å‚çš„çº¿ç´¢ï¼Œä½ å°±å¾—æ˜¾å¼åœ°æŒ‡å®šå®ƒï¼ˆç±»å‹å½¢å‚ï¼‰

åˆ›å»ºåˆ—è¡¨æ¥è¯´ï¼Œå¯ä»¥åœ¨åˆ—è¡¨å˜é‡å£°æ˜ä¸­ï¼ˆå¼•ç”¨ï¼‰è¯´æ˜æ³›å‹çš„ç±»å‹ï¼Œä¹Ÿå¯ä»¥é€‰æ‹©åœ¨åˆ›å»ºåˆ—è¡¨çš„å‡½æ•°ä¸­è¯´æ˜ç±»å‹å®å‚ï¼š

```kotlin
val readers: MutableList<String> = mutableListOf("test1", "test2")
val readers2 = mutableListOf<String>("test1", "test2")
```

> Kotlin å§‹ç»ˆè¦æ±‚å®å‚è¦ä¹ˆè¢«æ˜¾å¼åœ°è¯´æ˜ï¼Œè¦ä¹ˆèƒ½è¢«ç¼–è¯‘å™¨æ¨å¯¼å‡ºæ¥ã€‚Kotlin ä»ä¸€å¼€å§‹å°±æ”¯æŒæ³›å‹ï¼Œå®ƒçš„ç±»å‹å®å‚å¿…é¡»å®šä¹‰

## æ³›å‹ç±»ã€å‡½æ•°å’Œå±æ€§

### æ³›å‹å‡½æ•°

æ³›å‹å‡½æ•°ï¼Œå¾ˆå¤šåº“å‡½æ•°æ˜¯æ³›å‹å‡½æ•°

```kotlin
public fun <T> List<T>.slice(indices: IntRange): List<T> {
    if (indices.isEmpty()) return listOf()
    return this.subList(indices.start, indices.endInclusive + 1).toList()
}
// å‡½æ•°çš„è¿”å›ç±»å‹æ˜¯List<T>ï¼Œå‡½æ•°çš„ç±»å‹å½¢å‚æ˜¯T
```

### æ³›å‹å±æ€§

å’Œæ³›å‹å‡½æ•°ä¸€æ ·ï¼Œå¯ä»¥å£°æ˜æ³›å‹çš„æ‰©å±•å±æ€§

```kotlin
val <T> List<T>.penultimate: T
    get() = this[size - 2]
```

æ™®é€šï¼ˆä¸æ˜¯æ‰©å±•å±æ€§ï¼‰å±æ€§ä¸èƒ½æ‹¥æœ‰ç±»å‹å‚æ•°ï¼Œä¸èƒ½åœ¨ä¸€ä¸ªç±»çš„å±æ€§ä¸­å­˜å‚¨å¤šä¸ªä¸åŒç±»å‹çš„å€¼ï¼Œå› æ­¤å£°æ˜æ³›å‹å±æ€§éæ‰©å±•å‡½æ•°æ²¡æœ‰ä»»ä½•æ„ä¹‰ã€‚

```kotlin
 val <T> x:T = null
```

### æ³›å‹ç±»

åŸºæœ¬å’Œ Java è¯­æ³•æ„ä¹‰ï¼Œåœ¨ç±»åç§°ååŠ ä¸Š `<>`

## ç±»å‹å‚æ•°çº¦æŸ

**ç±»å‹å‚æ•°çº¦æŸ**å¯ä»¥é™åˆ¶ä½œä¸ºæ³›å‹ç±»å’Œæ³›å‹å‡½æ•°çš„ç±»å‹å®å‚çš„ç±»å‹ã€‚

**ä¸Šç•Œçº¦æŸ**<br>ä¸€ä¸ªç±»å‹æŒ‡å®šä¸ºæ³›å‹ç±»å‹å½¢å‚çš„ä¸Šç•Œçº¦æŸï¼Œåœ¨æ³›å‹ç±»å‹å…·ä½“çš„åˆå§‹åŒ–ä¸­ï¼Œå…¶å¯¹åº”çš„ç±»å‹å®å‚å¿…é¡»æ˜¯è¿™ä¸ªå…·ä½“ç±»å‹æˆ–è€…å®ƒçš„å­ç±»å‹ã€‚

```kotlin
// Javaä¸­
<T extends Number> T sum(List<T> list)
// kotlinä¸­
fun <T : Number> List<T>.sum(): T
```

ä¾‹å­ï¼šæ‰¾å‡ºä¸¤ä¸ªæ¡ç›®ä¸­æœ€å¤§å€¼çš„æ³›å‹å‡½æ•°ï¼š

```kotlin
fun <T : Comparable<T>> max(first: T, second: T): T {
    return if (first > second) first else second
}
```

åœ¨ä¸€ä¸ªç±»å‹å‚æ•°ä¸ŠæŒ‡å®šå¤šä¸ªçº¦æŸï¼Œç»™å®šçš„ seq ä»¥å¥å·ç»“å°¾

```kotlin
fun <T> ensureTrailingPerion(seq: T) where T : CharSequence, T : Appendable {
    if (!seq.endsWith(".")) {
        seq.append(".")
    }
}
```

### ç±»å‹å½¢å‚éç©º

æ²¡æœ‰æŒ‡å®šä¸Šç•Œçš„ç±»å‹å½¢å‚éƒ½ä¼šä½¿ç”¨ `Any?` è¿™ä¸ªé»˜è®¤çš„ä¸Šç•Œã€‚

ç±»å‹å½¢å‚éç©ºï¼Œç”¨ `Any` æ›¿ä»£ `Any?`ï¼Œä¹Ÿå¯ä»¥æŒ‡å®šä»»æ„éç©ºç±»å‹ä½œä¸ºä¸Šç•Œï¼Œè®©ç±»å‹å‚æ•°éç©ºã€‚

```kotlin
class Processsor<T : Any> {
    fun process(value: T) {
        value.hashCode()
    }
}
```

## `*` å·

Java ä¸­å•ä¸ª `?` å·ä¹Ÿèƒ½ä½œä¸ºæ³›å‹é€šé…ç¬¦ä½¿ç”¨ï¼Œç›¸å½“äº `? extends Object`ã€‚

åœ¨ Kotlin ä¸­æœ‰ç­‰æ•ˆçš„å†™æ³•ï¼š`*` å·ï¼Œç›¸å½“äº `out Any`ã€‚

```kotlin
var list: List<*>
```

å’Œ Java ä¸åŒçš„åœ°æ–¹æ˜¯ï¼Œå¦‚æœä½ çš„ç±»å‹å®šä¹‰é‡Œå·²ç»æœ‰äº† out æˆ–è€… inï¼Œé‚£è¿™ä¸ªé™åˆ¶åœ¨å˜é‡å£°æ˜æ—¶ä¹Ÿä¾ç„¶åœ¨ï¼Œä¸ä¼šè¢« * å·å»æ‰ã€‚

æ¯”å¦‚ä½ çš„ç±»å‹å®šä¹‰é‡Œæ˜¯ out T : Number çš„ï¼Œé‚£å®ƒåŠ ä¸Š <*> ä¹‹åçš„æ•ˆæœå°±ä¸æ˜¯ out Anyï¼Œè€Œæ˜¯ out Numberã€‚

## where

Java ä¸­å£°æ˜ç±»æˆ–æ¥å£çš„æ—¶å€™ï¼Œå¯ä»¥ä½¿ç”¨ extends æ¥è®¾ç½®è¾¹ç•Œï¼Œå°†æ³›å‹ç±»å‹å‚æ•°é™åˆ¶ä¸ºæŸä¸ªç±»å‹çš„å­é›†ï¼ŒåŒæ—¶è¿™ä¸ªè¾¹ç•Œæ˜¯å¯ä»¥è®¾ç½®å¤šä¸ªï¼Œç”¨ & ç¬¦å·è¿æ¥ï¼š

```java
//                            ğŸ‘‡  T çš„ç±»å‹å¿…é¡»åŒæ—¶æ˜¯ Animal å’Œ Food çš„å­ç±»å‹
class Monster<T extends Animal & Food>{ 
}
```

Kotlin åªæ˜¯æŠŠ extends æ¢æˆäº† `:` å†’å·ï¼Œè®¾ç½®å¤šä¸ªè¾¹ç•Œå¯ä»¥ä½¿ç”¨ `where` å…³é”®å­—ï¼šã€‚

```kotlin
class Monster<T> where T : Animal, T : Food
```

## reified

å…·ä½“å¯è§ `Kotlinè¿è¡Œæ—¶æ³›å‹` ç« èŠ‚<br>ç”±äº Java ä¸­çš„æ³›å‹å­˜åœ¨ç±»å‹æ“¦é™¤çš„æƒ…å†µï¼Œä»»ä½•åœ¨è¿è¡Œæ—¶éœ€è¦çŸ¥é“æ³›å‹ç¡®åˆ‡ç±»å‹ä¿¡æ¯çš„æ“ä½œéƒ½æ²¡æ³•ç”¨äº†<br>æ¯”å¦‚ä½ ä¸èƒ½æ£€æŸ¥ä¸€ä¸ªå¯¹è±¡æ˜¯å¦ä¸ºæ³›å‹ç±»å‹ T çš„å®ä¾‹ï¼š

```java
<T> void printIfTypeMatch(Object item) {
    if (item instanceof T) { // ğŸ‘ˆ IDE ä¼šæç¤ºé”™è¯¯ï¼Œillegal generic type for instanceof
        System.out.println(item);
    }
}
```

Kotlin é‡ŒåŒæ ·ä¹Ÿä¸è¡Œï¼š

```kotlin
fun <T> printIfTypeMatch(item: Any) {
    if (item is T) { // ğŸ‘ˆ IDE ä¼šæç¤ºé”™è¯¯ï¼ŒCannot check for instance of erased type: T
        println(item)
    }
}
```

åœ¨ Java ä¸­çš„è§£å†³æ–¹æ¡ˆé€šå¸¸æ˜¯é¢å¤–ä¼ é€’ä¸€ä¸ª Class ç±»å‹çš„å‚æ•°ï¼Œç„¶åé€šè¿‡ Class#isInstance æ–¹æ³•æ¥æ£€æŸ¥

```java
<T> void check(Object item, Class<T> type) {
    if (type.isInstance(item)) {
               ğŸ‘†
        System.out.println(item);
    }
}
```

Kotlin ä¸­åŒæ ·å¯ä»¥è¿™ä¹ˆè§£å†³ï¼Œä¸è¿‡è¿˜æœ‰ä¸€ä¸ªæ›´æ–¹ä¾¿çš„åšæ³•ï¼šä½¿ç”¨å…³é”®å­— reified é…åˆ inline æ¥è§£å†³ï¼š

```kotlin
inline fun <reified T> printIfTypeMatch(item: Any) {
    if (item is T) { // ğŸ‘ˆ è¿™é‡Œå°±ä¸ä¼šåœ¨æç¤ºé”™è¯¯äº†
        println(item)
    }
}
```

## kotlin åå˜ out & é€†å˜ in

å’Œ Java æ³›å‹ä¸€æ ·ï¼ŒKolin ä¸­çš„æ³›å‹æœ¬èº«ä¹Ÿæ˜¯ä¸å¯å˜çš„ã€‚

1. ä½¿ç”¨å…³é”®å­— `out` æ¥æ”¯æŒåå˜ï¼Œç­‰åŒäº Java ä¸­çš„ä¸Šç•Œé€šé…ç¬¦ `? extends`ã€‚
2. ä½¿ç”¨å…³é”®å­— `in` æ¥æ”¯æŒé€†å˜ï¼Œç­‰åŒäº Java ä¸­çš„ä¸‹ç•Œé€šé…ç¬¦ `? super`ã€‚

### out åå˜ åªèƒ½è¯»ä¸èƒ½å†™

out è¡¨ç¤ºï¼Œæˆ‘è¿™ä¸ªå˜é‡æˆ–è€…å‚æ•°åªç”¨æ¥è¾“å‡ºï¼Œä¸ç”¨æ¥è¾“å…¥ï¼Œä½ åªèƒ½è¯»æˆ‘ä¸èƒ½å†™æˆ‘ï¼›å¯¹åº” Java ä¸­çš„ `? extend`ã€‚

### in é€†å˜ åªèƒ½å†™ä¸èƒ½è¯»

in è¡¨ç¤ºå®ƒåªç”¨æ¥è¾“å…¥ï¼Œä¸ç”¨æ¥è¾“å‡ºï¼Œä½ åªèƒ½å†™æˆ‘ä¸èƒ½è¯»æˆ‘ï¼›å¯¹åº” Java ä¸­çš„ `? super T`ã€‚

å¦‚ `List<? extends Foo>`ï¼Œå°†æ— æ³•è°ƒç”¨ add() å’Œ set() æ–¹æ³•ï¼Œä½†å¹¶ä¸ä»£è¡¨è¿™ä¸ªé›†åˆå¯¹è±¡çš„å€¼æ˜¯ä¸å˜çš„ (immutable)ï¼Œå¦‚ clear() æ–¹æ³•å¯ä»¥æ¸…ç©ºé›†åˆä¸­çš„å€¼ï¼Œ**é€šé…ç¬¦ç±»å‹å”¯ä¸€èƒ½å¤Ÿç¡®ä¿çš„ä»…ä»…æ˜¯ç±»å‹å®‰å…¨ï¼Œå¯¹è±¡å€¼çš„ä¸å¯å˜æ€§æ˜¯å¦å¤–ä¸€ä¸ªé—®é¢˜**ã€‚

1. èƒ½æ¥æ”¶çš„ç±»å‹ä¸ºç±»å‹å®å‚ä¸º Foo åŠå­ç±»
2. å†™çš„æ•°æ®æ˜¯ T æˆ– T çš„å­ç±»

```kotlin
val apples4: MutableList<Apple> = mutableListOf()
val fruit4: MutableList<Fruit> = mutableListOf()
val smallApple4: MutableList<SmallApple> = mutableListOf()
val any4: MutableList<Any> = mutableListOf()
val fruit4_0: MutableList<in Apple> = apples4 // ok
fruit4_0.add(Apple()) // ok
fruit4_0.add(SmallApple()) // ok
//    fruit4_0.add(Fruit()) // ç¼–è¯‘é”™è¯¯
//    fruit4_0.add(Any()) // ç¼–è¯‘é”™è¯¯
val fruit4_1: MutableList<in Apple> = fruit4 // ok
fruit4_1.add(Apple()) // ok
fruit4_1.add(SmallApple()) // ok
//    fruit4_1.add(Fruit()) // ç¼–è¯‘é”™è¯¯
//    fruit4_1.add(Any()) // ç¼–è¯‘é”™è¯¯
val fruit4_2: MutableList<in Apple> = any4 // ok
fruit4_2.add(Apple()) // ok
fruit4_2.add(SmallApple()) // ok
//    fruit4_2.add(Fruit()) // ç¼–è¯‘é”™è¯¯
//    fruit4_2.add(Any()) // ç¼–è¯‘é”™è¯¯
//    val fruit4_3: MutableList<in Apple> = smallApple4 // ç¼–è¯‘é”™è¯¯
```

### Java å’Œ Kotlin æ•°ç»„ä¸­çš„åå˜å’Œé€†å˜

#### Java é‡Œçš„æ•°ç»„æ˜¯æ”¯æŒåå˜çš„ï¼Œè€Œ Kotlin ä¸­çš„æ•°ç»„ Array ä¸æ”¯æŒåå˜

```java
Fruit[] fruitsArray = new Fruit[3]; // Javaæ•°ç»„æ”¯æŒåå˜
fruitsArray[0] = new Fruit();
fruitsArray[0] = new Apple();
fruitsArray[0] = new SmallApple();
```

å› ä¸ºåœ¨ Kotlin ä¸­æ•°ç»„æ˜¯ç”¨ Array ç±»æ¥è¡¨ç¤ºçš„ï¼Œè¿™ä¸ª Array ç±»ä½¿ç”¨æ³›å‹å°±å’Œé›†åˆç±»ä¸€æ ·ï¼Œæ‰€ä»¥ä¸æ”¯æŒåå˜ã€‚

#### Java ä¸­çš„ List æ¥å£ä¸æ”¯æŒåå˜ï¼Œè€Œ Kotlin ä¸­çš„ List æ¥å£æ”¯æŒåå˜

Java ä¸­çš„ List ä¸æ”¯æŒåå˜ï¼ŒåŸå› åœ¨ä¸Šæ–‡å·²ç»è®²è¿‡äº†ï¼Œéœ€è¦ä½¿ç”¨æ³›å‹é€šé…ç¬¦æ¥è§£å†³ã€‚

åœ¨ Kotlin ä¸­ï¼Œå®é™…ä¸Š MutableList æ¥å£æ‰ç›¸å½“äº Java çš„ Listã€‚Kotlin ä¸­çš„ List æ¥å£å®ç°äº†åªè¯»æ“ä½œï¼Œæ²¡æœ‰å†™æ“ä½œï¼Œæ‰€ä»¥ä¸ä¼šæœ‰ç±»å‹å®‰å…¨ä¸Šçš„é—®é¢˜ï¼Œè‡ªç„¶å¯ä»¥æ”¯æŒåå˜ã€‚

```kotlin
// kotlin
public interface List<out E> : Collection<E>
```

Kotlin ä¸­çš„ List æ”¯æŒåå˜

```kotlin
val apple5: List<Apple> = listOf()
val smallApple5: List<SmallApple> = listOf()
val fruit5_0: List<out Fruit> = apple5
val fruit5_1: List<out Fruit> = smallApple5
```

æ¡ˆä¾‹ï¼š

```kotlin
/**
 * å®ç°ä¸€ä¸ª fill å‡½æ•°ï¼Œä¼ å…¥ä¸€ä¸ª Array å’Œä¸€ä¸ªå¯¹è±¡ï¼Œå°†å¯¹è±¡å¡«å……åˆ° Array ä¸­ï¼Œè¦æ±‚ Array å‚æ•°çš„æ³›å‹æ”¯æŒé€†å˜ï¼ˆå‡è®¾ Array size ä¸º 1ï¼‰ã€‚  https://kaixue.io/kotlin-generics/
 */
fun <T> fill(array: Array<in T>, t: T) {
    array[0] = t
}

/**
 * å®ç°ä¸€ä¸ª copy å‡½æ•°ï¼Œä¼ å…¥ä¸¤ä¸ª Array å‚æ•°ï¼Œå°†ä¸€ä¸ª Array ä¸­çš„å…ƒç´ å¤åˆ¶åˆ°å¦å¤–ä¸ª Array ä¸­ï¼Œè¦æ±‚ Array å‚æ•°çš„æ³›å‹åˆ†åˆ«æ”¯æŒåå˜å’Œé€†å˜ã€‚
 */
fun <T> copy(src: Array<out T>, dst: Array<in T>) {
    for (index in src.indices) {
        val source = src[index]
        dst[index] = source
    }
}
```

## Kotlin è¿è¡Œæ—¶æ³›å‹

### 1ã€è¿è¡Œæ—¶çš„æ³›å‹ï¼šç±»å‹æ£€æŸ¥å’Œè½¬æ¢

å’Œ Java ä¸€æ ·ï¼Œkotlin çš„æ³›å‹åœ¨è¿è¡Œæ—¶ä¹Ÿè¢«æ“¦é™¤äº†ã€‚

`List<*>` æ˜Ÿå·æŠ•å½±ï¼Œå’Œ Java ä¸­çš„ `List<?>` ä¸€æ ·ã€‚

ç”¨ `is` å¯ä»¥æ£€æŸ¥ï¼Œ

### 2ã€å£°æ˜å¸¦å®åŒ–ç±»å‹å‚æ•°çš„å‡½æ•°

å®åŒ–ï¼šæ¶ˆé™¤è¿è¡Œæ—¶ç±»å‹æ“¦é™¤å¯¹ Kotlin çš„å½±å“ï¼Œé€šè¿‡å°†å‡½æ•°å£°æ˜ä¸º inline æ¥è§£å†³ï¼Œä¿è¯å…¶ç±»å‹å®å‚ä¸è¢«æ“¦é™¤ã€‚

```kotlin
fun <T> isA(value: Any) = value is T // ç¼–è¯‘æŠ¥é”™
```

**å†…è”å‡½æ•°**ï¼šinline å‡½æ•°çš„ç±»å‹å½¢å‚èƒ½å¤Ÿè¢«å®åŒ–ï¼Œå¯ä»¥åœ¨è¿è¡Œæ—¶å¼•ç”¨å®é™…çš„ç±»å‹å®å‚ï¼›<br>å†…è”å‡½æ•°ï¼Œç¼–è¯‘å™¨ä¼šæŠŠæ¯ä¸€æ¬¡å‡½æ•°è°ƒç”¨éƒ½è½¬æ¢æˆå‡½æ•°å®é™…çš„ä»£ç å®ç°ï¼›ä½¿ç”¨å†…è”å‡½æ•°è¿˜å¯èƒ½æå‡æ€§èƒ½ï¼Œå¦‚æœå‡½æ•°ä½¿ç”¨äº† lambda å®å‚ï¼Œlambda çš„ä»£ç ä¹Ÿä¼šå†…è”ï¼Œä¸ä¼šåˆ›å»ºä»»ä½•åŒ¿åç±»ã€‚

**reified**å£°æ˜çš„ç±»å‹å‚æ•°ä¸ä¼šåœ¨è¿è¡Œæ—¶è¢«æ“¦é™¤

```kotlin
inline fun <reified T> isA(value: Any) = value is T // å¯ä»¥ç¼–è¯‘äº†
```

ä¾‹å­ï¼Œæ ‡å‡†åº“å‡½æ•° `filterIsInstance`ï¼Œæ¥æ”¶ä¸€ä¸ªé›†åˆï¼Œé€‰æ‹©æŒ‡å®šçš„ç±»å‹ï¼Œè¿”å›é›†åˆä¸­æ˜¯è¯¥ç±»å‹çš„å®ä¾‹

```kotlin
inline fun <reified T> Iterable<*>.filterIsInstance1(): List<T> {
    val dest = mutableListOf<T>()
    for (ele in this) {
        if (ele is T) {
            dest.add(ele)
        }
    }
    return dest
}
// ä½¿ç”¨
val items = listOf("one", 2, "three")
println(items.filterIsInstance<String>())
println(items.filterIsInstance1<String>())
```

> **æ³¨æ„**ï¼šå¸¦ reified ç±»å‹å‚æ•°çš„ inline å‡½æ•°ä¸èƒ½å† Java ä»£ç ä¸­è°ƒç”¨ï¼Œæ™®é€šçš„å†…è”å‡½æ•°å¯ä»¥åƒå¸¸è§„å‡½æ•°é‚£æ ·åœ¨ Java ä¸­è°ƒç”¨ï¼ˆå®ƒä»¬å¯ä»¥è¢«è°ƒç”¨è€Œä¸èƒ½è¢«å†…è”ï¼‰ï¼›å¸¦å®åŒ–ç±»å‹å‚æ•°çš„å‡½æ•°éœ€è¦é¢å¤–çš„å¤„ç†ï¼Œæ¥æŠŠç±»å‹å®å‚çš„å€¼æ›¿æ¢åˆ°å­—èŠ‚ç ä¸­ï¼Œæ‰€ä»¥å®ƒä»¬å¿…é¡»æ°¸è¿œæ˜¯å†…è”çš„ï¼Œè¿™æ ·å®ƒä»¬ä¸å¯èƒ½ç”¨ Java é‚£æ ·æ™®é€šçš„æ–¹æ³•è°ƒç”¨

ä¸€ä¸ªå†…è”å‡½æ•°å¯ä»¥æœ‰å¤šä¸ªå®åŒ–ç±»å‹å‚æ•°ï¼Œä¹Ÿå¯ä»¥åŒæ—¶æ‹¥æœ‰éå®åŒ–ç±»å‹å‚æ•°å’Œå®åŒ–ç±»å‹å‚æ•°ã€‚

> ä¸ºäº†ä¿è¯è‰¯å¥½çš„æ€§èƒ½ï¼Œå‡½æ•°å¤ªå¤§ï¼Œæœ€å¥½ä¸ä¸ä¾èµ–å®åŒ–ç±»å‹å‚æ•°çš„ä»£ç æŠ½å–åˆ°å•ç‹¬çš„éå†…è”å‡½æ•°ä¸­

#### 2-1 å®åŒ–ç±»å‹å‚æ•° (reified) æ›¿ä»£ç±»å¼•ç”¨ (Class)

å®åŒ–å‚æ•°å¯ä»¥ç”¨æ¥æ›¿ä»£æ¥æ”¶ `java.lang.Class` ç±»å‹å‚æ•°çš„ APIï¼Œå¦‚ JDK ä¸­çš„ ServiceLoaderï¼Œç”¨ kotlin é‡å†™

```kotlin
inline fun <reified T> loadService(): ServiceLoader<T>? {
    return ServiceLoader.load(T::class.java)
}
```

Android ä¸­çš„ startActivityï¼š

```kotlin
inline fun <reified T : Activity> Context.startActivity() {
   val intent = Intent(this, T::class.java) // ç›¸å½“äºT.class
   startActivity(intent)
}
// è°ƒç”¨
startActivity<DetailActivity>()
```

#### 2-2 å®åŒ–ç±»å‹å‚æ•°çš„é™åˆ¶

æŒ‰ç…§ä¸‹åˆ—æ–¹å¼æ¥ä½¿ç”¨å®åŒ–ç±»å‹å‚æ•°ï¼š

1. ç”¨åœ¨ç±»å‹æ£€æŸ¥å’Œç±»å‹è½¬æ¢ä¸­ ( is !is as as?)
2. ä½¿ç”¨ kotlin åå°„ API (::class)
3. è·å–å¯¹åº”çš„ java.lang.Class (::class.java)
4. ä½œä¸ºè°ƒç”¨å…¶ä»–å‡½æ•°çš„ç±»å‹å®å‚

ä¸èƒ½åšä¸‹é¢çš„ï¼š

1. åˆ›å»ºæŒ‡å®šä¸ºç±»å‹å‚æ•°çš„ç±»çš„å®ä¾‹
2. è°ƒç”¨ç±»å‹å‚æ•°ç±»çš„ä¼´ç”Ÿå¯¹è±¡çš„æ–¹æ³•
3. è°ƒç”¨å¸¦å®åŒ–ç±»å‹å‚æ•°çš„æ—¶å€™ä½¿ç”¨éå®åŒ–ç±»å‹å½¢å‚ä½œä¸ºç±»å‹å®å‚
4. æŠŠç±»ã€å±æ€§æˆ–è€…éå†…è”å‡½æ•°çš„ç±»å‹å‚æ•°æ ‡è®°ä¸º reified

# Kotlin ä¹‹æ³¨è§£

ä½¿ç”¨æ³¨è§£çš„è¯­æ³•å’Œ Java å®Œå…¨ä¸€æ ·ï¼Œè€Œå£°æ˜è‡ªå·±æ³¨è§£ç±»çš„è¯­æ³•ç•¥æœ‰ä¸åŒã€‚

## Kotlin æ³¨è§£åŸºç¡€

### å£°æ˜åº”ç”¨æ³¨è§£

`@Deprecated` æ³¨è§£è¢«å¢å¼ºäº†ï¼Œidea ä¸ä»…å¯ä»¥æç¤ºåº”è¯¥ç”¨å“ªä¸ªå‡½æ•°æ›¿ä»£ï¼Œè¿˜ä¼šæä¾›ä¸€ä¸ªå¿«é€Ÿè‡ªåŠ¨ä¿®æ­£ã€‚

```kotlin
@Deprecated("User removeNew(index) instead.", ReplaceWith("removeNew(index)"), DeprecationLevel.WARNING)
fun removeOld(index: Int) {
}

fun removeNew(index: Int) {
}
```

æ³¨è§£åªèƒ½æœ‰å¦‚ä¸‹ç±»å‹çš„å‚æ•°ï¼š<br>åŸºæœ¬æ•°æ®ç±»å‹ï¼Œå­—ç¬¦ä¸²ï¼Œæšä¸¾ï¼Œç±»å¼•ç”¨ï¼Œå…¶ä»–çš„æ³¨è§£ç±»ï¼Œä»¥åŠè¿™äº›ç±»å‹çš„æ•°ç»„

1. è¦æŠŠä¸€ä¸ªç±»æŒ‡å®šä¸ºæ³¨è§£çš„å®å‚ï¼Œéœ€è¦åœ¨ç±»åååŠ ä¸Š `::class`

```kotlin
@MyAnnotation(MyClass::class)
```

2. è¦æŠŠå¦ä¸€ä¸ªæ³¨è§£æŒ‡å®šä¸ºå®å‚ï¼Œå»æ‰æ³¨è§£åç§°å‰é¢çš„ `@`ï¼Œå¦‚@Deprecated æ³¨è§£çš„å®å‚@ReplaceWith æ˜¯ä¸€ä¸ªæ³¨è§£å‚æ•°
3. è¦æŠŠä¸€ä¸ªæ•°ç»„æŒ‡å®šä¸ºä¸€ä¸ªå®å‚ï¼Œä½¿ç”¨ `arrayOf` å‡½æ•°ï¼ˆå¦‚æœæ³¨è§£ç±»æ˜¯åœ¨ Java ä¸­å£°æ˜çš„ï¼Œå‘½åä¸º value çš„å½¢å‚æŒ‰éœ€è‡ªåŠ¨åœ°è¢«è½¬æ¢ä¸ºå¯å˜é•¿åº¦çš„å½¢å‚ï¼Œæ‰€ä»¥ä¸ç”¨ arrayOf å‡½æ•°å°±å¯ä»¥æä¾›å¤šä¸ªå®å‚ï¼‰

```kotlin
@RequestMapping(path = arrayOf("/foo","/bar"))
```

æ³¨è§£å®å‚éœ€è¦æ˜¯**ç¼–è¯‘æœŸå¸¸é‡**ï¼Œç”¨ `const` ä¿®é¥°ç¬¦æ ‡è®°ã€‚

> const æ ‡æ³¨çš„å±æ€§å¯ä»¥å£°æ˜åœ¨ä¸€ä¸ªæ–‡ä»¶çš„é¡¶å±‚æˆ–è€…ä¸€ä¸ª Object ä¹‹ä¸­ï¼Œè€Œä¸”å¿…é¡»åˆå§‹åŒ–ä¸ºåŸºæœ¬æ•°æ®ç±»å‹æˆ– String ç±»å‹çš„å€¼

### æ³¨è§£ç›®æ ‡

Kotlin ä¸­å•ä¸ªå£°æ˜ä¼šå¯¹åº”å¤šä¸ª Java å£°æ˜ï¼Œè€Œä¸”å®ƒä»¬æ¯ä¸ªéƒ½èƒ½æºå¸¦æ³¨è§£ï¼Œå¦‚ä¸€ä¸ª Kotlin å±æ€§å¯¹åº”ä¸€ä¸ª Java å­—æ®µã€ä¸€ä¸ª getterã€å¯èƒ½è¿˜æœ‰ setter å’Œå®ƒçš„å‚æ•°ï¼›è€Œä¸€ä¸ªä¸»æ„é€ æ–¹æ³•ä¸­å£°æ˜çš„å±æ€§è¿˜å¤šæ‹¥æœ‰ä¸€ä¸ªå¯¹åº”çš„å…ƒç´ ï¼šæ„é€ æ–¹æ³•çš„å‚æ•°ã€‚å› æ­¤ï¼Œ**è¯´æ˜è¿™äº›å…ƒç´ ä¸­å“ªäº›éœ€è¦æ³¨è§£ååˆ†å¿…è¦**

ä½¿ç”¨**ç‚¹ç›®æ ‡**å£°æ˜è¢«ç”¨æ¥è¯´æ˜è¦æ³¨è§£çš„å…ƒç´ ã€‚ç‚¹ç›®æ ‡æ”¾åœ¨ `@` ç¬¦å·å’Œæ³¨è§£åç§°ç›´æ¥ï¼Œå¹¶ç”¨ `:` å’Œæ³¨è§£åç§°éš”å¼€ï¼š

```kotlin
@get:Rule // æ³¨è§£@Ruleè¢«åº”ç”¨åˆ°äº†å±æ€§getterä¸Š
// @get ä½¿ç”¨ç‚¹ç›®æ ‡
// Rule æ³¨è§£åç§°
class HasTempFolder {
    @get:Rule
    private val folder = HasTempFolder()
    @Test
    fun testUsingTempFolder() {

    }
}
```

ä½¿ç”¨ Java ä¸­å£°æ˜çš„æ³¨è§£æ¥æ³¨è§£ä¸€ä¸ªå±æ€§ï¼Œå®ƒä¼šè¢«é»˜è®¤åœ°åº”ç”¨åˆ°ç›¸åº”çš„å­—æ®µä¸Šï¼ŒKotlin ä¹Ÿå¯ä»¥è®©ä½ å£°æ˜è¢«ç›´æ¥å¯¹åº”åˆ°å±æ€§ä¸Šçš„æ³¨è§£ï¼š

1. property Java çš„æ³¨è§£ä¸èƒ½åº”ç”¨è¿™ç§ä½¿ç”¨ç‚¹ç›®æ ‡
2. field ä¸ºå±æ€§ç”Ÿæˆçš„å­—æ®µ
3. get å±æ€§çš„ getter
4. set å±æ€§çš„ setter
5. receiver æ‰©å±•å‡½æ•°æˆ–æ‰©å±•å±æ€§çš„æ¥æ”¶è€…å‚æ•°
6. param æ„é€ æ–¹æ³•çš„å‚æ•°
7. setparam å±æ€§ setter çš„å‚æ•°
8. delegate ä¸ºå§”æ‰˜å±æ€§å­˜å‚¨å§”æ‰˜å®ä¾‹çš„å­—æ®µ
9. file åŒ…å«åœ¨æ–‡ä»¶ä¸­å£°æ˜çš„é¡¶å±‚å‡½æ•°å’Œå±æ€§çš„ç±»<br>ä»»ä½•åº”ç”¨åˆ° file ç›®æ ‡çš„æ³¨è§£éƒ½å¿…é¡»æ”¾åœ¨æ–‡ä»¶çš„é¡¶å±‚ï¼Œæ”¾åœ¨ package æŒ‡ä»¤ä¹‹å‰ï¼Œ`@JvmName` æ˜¯å¸¸è§çš„åº”ç”¨åˆ°æ–‡ä»¶çš„æ³¨è§£ä¹‹ä¸€ï¼Œå®ƒæ”¹å˜äº†å¯¹åº”ç±»çš„åç§°ã€‚

Kotlin å…è®¸ä½ å¯¹ä»»æ„çš„è¡¨è¾¾å¼åº”ç”¨æ³¨è§£ï¼Œè€Œä¸ä»…ä»…æ˜¯ç±»å’Œå‡½æ•°çš„å£°æ˜åŠç±»å‹ã€‚

ç”¨æ³¨è§£æ§åˆ¶ Java APIï¼Œæœ‰äº›æ³¨è§£æ›¿ä»£äº† Java çš„å…³é”®å­—ï¼Œå…¶ä»–çš„æ³¨è§£åˆ™æ˜¯è¢«ç”¨æ¥æ”¹å˜ Kotlin å£°æ˜å¯¹ Java è°ƒç”¨è€…çš„å¯è§æ€§

1. `@Volatile` å’Œ `@Strictfp` å……å½“äº† Java å…³é”®å­— volatile å’Œ strictfp çš„æ›¿èº«
2. å…¶ä»–çš„æ³¨è§£è¢«ç”¨æ¥æ”¹å˜ Kotlin å£°æ˜å¯¹ Java è°ƒç”¨è€…çš„å¯è§æ€§<br>`@JvmName` æ”¹å˜ç”± Kotlin ç”Ÿæˆçš„ Java æ–¹æ³•æˆ–å­—æ®µçš„åç§°<br>`@JvmStatic` ç”¨åœ¨å¯¹è±¡å£°æ˜æˆ–è€…ä¼´ç”Ÿå¯¹è±¡çš„æ–¹æ³•ä¸Šï¼ŒæŠŠå®ƒä»¬æš´éœ²æˆ Java çš„é™æ€æ–¹æ³•<br>`@JvmOverloads` æŒ‡å¯¼ kotlin ç¼–è¯‘å™¨ä¸ºå¸¦é»˜è®¤å‚æ•°å€¼çš„å‡½æ•°ç”Ÿæˆå¤šä¸ªé‡è½½å‡½æ•°<br>`@JvmField` åº”ç”¨äºä¸€ä¸ªå±æ€§ï¼ŒæŠŠè¿™ä¸ªå±æ€§æš´éœ²æˆä¸€ä¸ªæ²¡æœ‰è®¿é—®å™¨çš„å…¬æœ‰ Java å­—æ®µ

æ¡ˆä¾‹ï¼š

```kotlin
@MyAnnoClass
class Foo @MyAnnoClass constructor(@MyAnnoClass var n: String) { // ç±»çš„ä¸»æ„é€ å™¨æ·»åŠ æ³¨è§£

    var x: Int? = null
        @MyAnnoClass set
        @MyAnnoClass get

    @get:MyAnnoClass // getæ·»åŠ æ³¨è§£
    @set:MyAnnoClass // setæ·»åŠ æ³¨è§£
    var y: String? = ""


    // å±æ€§æ·»åŠ æ³¨è§£
    @MyAnnoClass
    var z: Double? = 0.0

    @MyAnnoClass
    fun testFoo(@MyAnnoClass s: String) {

    }

}

@Target(AnnotationTarget.ANNOTATION_CLASS, AnnotationTarget.FUNCTION, AnnotationTarget.VALUE_PARAMETER, AnnotationTarget.EXPRESSION,
        AnnotationTarget.PROPERTY_SETTER, AnnotationTarget.PROPERTY_GETTER, AnnotationTarget.FIELD, AnnotationTarget.CONSTRUCTOR,
        AnnotationTarget.CLASS)
@Retention(AnnotationRetention.RUNTIME)
@Repeatable
@MustBeDocumented
annotation class MyAnnoClass
```

### æ³¨è§£åˆ° Lambda è¡¨è¾¾å¼

æ³¨è§£ Lambdaï¼ŒLambda è¡¨è¾¾å¼çš„å‡½æ•°ä½“å†…å®¹å°†ä¼šç”Ÿæˆä¸€ä¸ª invoke() æ–¹æ³•ï¼Œæ³¨è§£å°†è¢«æ·»åŠ åˆ°è¿™ä¸ªæ–¹æ³•ä¸Š

## Kotlin ä¸­çš„å…ƒæ³¨è§£

- [@Target](/Target) <br>æŒ‡å®šè¿™ä¸ªæ³¨è§£å¯è¢«ç”¨äºå“ªäº›å…ƒç´ 
- [@Retention](/Retention) <br>æŒ‡å®šè¿™ä¸ªæ³¨è§£çš„ä¿¡æ¯ä¿ç•™çš„æ—¶æœº
- [@Retention](/Retention) <br>å…è®¸åœ¨å•ä¸ªå…ƒç´ ä¸Šå¤šæ¬¡ä½¿ç”¨åŒä¸€ä¸ªæ³¨è§£
- [@MustBeDocumented](/MustBeDocumented) <br>è¡¨ç¤ºè¿™ä¸ªæ³¨è§£æ˜¯å…¬å¼€ API çš„ä¸€éƒ¨åˆ†ï¼Œåœ¨è‡ªåŠ¨äº§ç”Ÿçš„ API çš„æ–‡æ¡£çš„ç±»æˆ–å‡½æ•°ç­¾åä¸­ï¼Œåº”è¯¥åŒ…å«è¿™ä¸ªæ³¨è§£çš„ä¿¡æ¯

```kotlin
@Target(AnnotationTarget.ANNOTATION_CLASS, AnnotationTarget.FUNCTION, AnnotationTarget.VALUE_PARAMETER, AnnotationTarget.EXPRESSION)
@Retention(AnnotationRetention.RUNTIME)
@Repeatable
@MustBeDocumented
annotation class MyAnnoClass
```

## Kotlin æ³¨è§£ç±»

æ³¨è§£ç±»å¯ä»¥æ‹¥æœ‰å¸¦å‚æ•°çš„æ„é€ å™¨

```kotlin
@Special("hacket")
class TestSpecial {
}
annotation class Special(val why: String) {
}
```

æ³¨è§£ç±»çš„æ„é€ å™¨åªèƒ½ç”¨ä¸‹é¢çš„ç±»å‹ï¼š

1. ä¸ Java åŸºæœ¬ç±»å‹å¯¹åº”çš„æ•°æ®ç±»å‹ï¼ˆIntã€Long ç­‰ï¼‰
2. String
3. æšä¸¾ç±»
4. KClass
5. å…¶ä»–æ³¨è§£ç±»

ä¸ºæ³¨è§£æ„é€ å™¨æ·»åŠ å‚æ•°æ—¶ï¼Œæ³¨æ„ 2 ç‚¹ï¼š

1. å‚æ•°ç±»å‹åªèƒ½ä½¿ç”¨ valï¼Œä¸èƒ½ç”¨ varï¼Œä¸åŠ ä¹Ÿä¸è¡Œ
2. å½“å‚æ•°ç±»å‹æ˜¯å¦å¤–ä¸€ä¸ªæ³¨è§£ç±»æ—¶ï¼Œè¯¥æ³¨è§£ç±»çš„åå­—å‰é¢ä¸èƒ½ä½¿ç”¨ `@`

```kotlin
annotation class Person(val value: String, val num: Int)

enum class MyEnum {
    VALUE1, VALUE2
}

// æšä¸¾ç±»å’Œæ³¨è§£ç±»
annotation class NewWorld(val value: MyEnum, val p: Person)

annotation class Ann(val arg1: KClass<*>, val args2: KClass<out Any>)

@Ann(String::class, Int::class) // KCLassï¼ŒJavaç±»ä¹Ÿå¯ä»¥æ­£å¸¸è®¿é—®
class TestAnn {

}
```

## ä½¿ç”¨æ³¨è§£å®šåˆ¶ JSON åºåˆ—åŒ–ååºåˆ—åŒ–

JKid åº“ä¸ºä¾‹<br>`@JsonExclude` æ ‡è®°ä¸€ä¸ªå±æ€§ï¼Œè¿™ä¸ªå±æ€§åº”è¯¥æ’é™¤åœ¨åºåˆ—åŒ–å’Œååºåˆ—åŒ–ä¹‹å¤–<br>`@JsonName` ä»£è¡¨è¿™ä¸ªå±æ€§çš„ JSON é”®å€¼å¯¹ä¹‹ä¸­çš„é”®åº”è¯¥æ˜¯ä¸€ä¸ªç»™å®šçš„å­—ç¬¦ä¸²ï¼Œè€Œä¸æ˜¯å±æ€§çš„åç§°

### å£°æ˜æ³¨è§£

æ³¨è§£ç±»åªæ˜¯ç”¨æ¥å®šä¹‰å…³è”åˆ°å£°æ˜å’Œè¡¨è¾¾å¼çš„å…ƒæ•°æ®çš„ç»“æ„ï¼Œä»–ä»¬ä¸èƒ½åŒ…å«ä»»ä½•ä»£ç ï¼Œç¼–è¯‘å™¨ç¦æ­¢ä¸ºä¸€ä¸ªæ³¨è§£ç±»æŒ‡å®šç±»ä¸»ä½“

```kotlin
annotation class JsonExclude
```

å¯¹æ‹¥æœ‰å‚æ•°çš„æ³¨è§£æ¥è¯´ï¼Œåœ¨ç±»çš„æ„é€ æ–¹æ³•ä¸­å£°æ˜è¿™äº›å‚æ•°ï¼Œå¯¹æ³¨è§£ç±»çš„æ‰€æœ‰å‚æ•°æ¥è¯´ï¼Œval æ˜¯å¼ºåˆ¶çš„

```kotlin
annotation class JsonExclude(val name: String)
```

Java ä¸­æœ‰ value æ–¹æ³•ï¼Œè€Œ kotlin æ³¨è§£æ‹¥æœ‰ä¸€ä¸ª name å±æ€§ï¼Œkotlin æ³¨è§£è°ƒç”¨å°±æ˜¯å¸¸è§„çš„æ„é€ æ–¹æ³•è°ƒç”¨ï¼Œå¯ä»¥ç”¨å‘½åå®å‚è¯­æ³•è®©å®å‚åç§°å˜ä¸ºæ˜¾ç¤ºçš„ï¼Œæˆ–å¯ä»¥çœç•¥æ‰è¿™äº›å®å‚ã€‚

#### 1-1 å…ƒæ³¨è§£

1. `@Target` æ³¨è§£åº”ç”¨çš„ç›®æ ‡<br>Java ä¸­æ— æ³•ä½¿ç”¨ç›®æ ‡ä¸º `PORPERTY` çš„æ³¨è§£ï¼Œé™¤äº†æ·»åŠ ä¸€ä¸ª `AnnotationTarget.FIELD`ï¼Œè¿™æ ·æ³¨è§£å¯ä»¥åœ¨ Java å’Œ Kotlin ä¸­çš„å±æ€§æˆ–å­—æ®µéƒ½å¯ä»¥ä½¿ç”¨
2. `@Retention`<br>Java é»˜è®¤æ˜¯ä¿å­˜çš„ CLASS<br>è€Œ Kotlin é»˜è®¤æ³¨è§£æ‹¥æœ‰ RUNTIME ä¿ç•™

#### 1-2 ä½¿ç”¨ç±»ä½œä¸ºæ³¨è§£å‚æ•°

```kotlin
annotation class DeserializeInterface(val targetClass: KClass<out Any>) // æ²¡æœ‰å†™ä¸Šoutå°±ä¸èƒ½ä¼ é€’Company::classï¼Œå”¯ä¸€å…è®¸çš„å®å‚æ˜¯Any::classï¼›outå…³é”®å­—è¯´æ˜å…è®¸å¼•ç”¨é‚£äº›ç»§æ‰¿Anyçš„ç±»ï¼Œè€Œä¸ä»…ä»…æ˜¯å¼•ç”¨Anyè‡ªå·±

// å¼•ç”¨
DeserializeInterface(Company::class) // Company::classè¡¨ç¤ºKClassM<Company>
```

KClass å¯¹åº”çš„æ˜¯ Java ä¸­çš„ `java.lang.Class` ç±»å‹ï¼Œå®ƒç”¨æ¥ä¿å­˜ kotlin ç±»çš„å¼•ç”¨ã€‚

#### 1-3 ä½¿ç”¨æ³›å‹ç±»åšæ³¨è§£å‚æ•°

# kotlin ä¹‹å¼‚å¸¸å¤„ç†

åŸºæœ¬è¯­æ³•å’Œ Java å·®ä¸å¤š<br>**Kotlin ä¸å­˜åœ¨ checked exceptionã€‚**

## try{}catch(e:Exception){}finally{}

```kotlin
fun calc() {
    while (true) {
        println("è¯·è¾“å…¥ç¬¬ä¸€ä¸ªæ•°å­—ï¼š")
        var num1Str = readLine(); // å¯èƒ½ä¸ºnull

        println("è¯·è¾“å…¥ç¬¬äºŒä¸ªæ•°å­—ï¼š")
        var num2Str = readLine(); // å¯èƒ½ä¸ºnull

        try {
            var num1 = num1Str!!.toInt()
            var num2 = num2Str!!.toInt()
            println("$num1+$num2=" + (num1 + num2))
        } catch(e: Exception) {
            println("å¤§å“¥ï¼Œä½ è¾“å…¥çš„æ•°å­—ä¸æ­£ç¡®:")
            e.printStackTrace()
        }
    }
}
```

## try{}catch(){}å¯ä½œä¸ºè¡¨è¾¾å¼

è¡¨è¾¾å¼çš„è¿”å›å€¼ï¼Œè¦ä¹ˆæ˜¯ try ä»£ç å—å†…æœ€åä¸€ä¸ªè¡¨è¾¾å¼çš„å€¼ï¼Œè¦ä¹ˆæ˜¯ catch ä»£ç å—å†…æœ€åä¸€ä¸ªè¡¨è¾¾å¼çš„å€¼ï¼Œfinally ä»£ç å†…ä¸å½±å“ try è¡¨è¾¾å¼çš„ç»“æœ

```kotlin
fun testException() {
    var var1: Nothing? = null
    val a = try {
        parseInt(var1)
    } catch (e: Exception) {
        null
    }
    println(a)
}
```

```kotlin
java.lang.NumberFormatException: For input string: "123a"
kotlin.Unit

kotlin.KotlinNullPointerException
kotlin.Unit
```
